<details>
<summary>✅ 點我展開可直接用的 index.html（修正版）</summary>
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>🏀 Sniper J GM 模擬器 - Mobile Edition</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f2f2f2; }
    h1 { color: #2c3e50; }
    button { margin:5px;padding:10px;font-size:16px;border-radius:5px;cursor:pointer;background:#3498db;color:#fff;border:none; }
    button:disabled { background:#aaa; cursor:not-allowed; }
    .player { background:#fff;margin:10px 0;padding:10px;border-radius:6px;display:flex;align-items:center;justify-content:space-between; }
    .player-info { flex-grow:1; }
    .container { max-width:900px; margin:auto; }
    .section { margin-top:30px; }
    #versionFooter { margin-top: 50px; text-align: center; color: #888; font-size: 14px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>🏀 Sniper J GM 模擬器 - Mobile+</h1>
    <div>
      <button id="clearBtn">清空存檔</button>
      <span id="dateDisplay"></span>
      <div id="moneyDisplay"></div>
    </div>
    <div class="section">
      <button id="showWarriorsBtn">勇士陣容</button>
      <button id="showFreeAgentsBtn">自由市場</button>
      <button id="simulateGameBtn">模擬比賽</button>
      <button id="resetTrainingBtn">重置訓練</button>
    </div>
    <div id="teamDisplay"></div>
    <div id="freeAgentsDisplay"></div>
    <div id="gameResult"></div>
    <div id="versionFooter">Sniper J GM v0.9.2M（行動強化版）</div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const ratingMap = {"C":1,"C+":2,"B-":3,"B":4,"B+":5,"A-":6,"A":7,"A+":8,"S":9,"S+":10};
      const order = ["C","C+","B-","B","B+","A-","A","A+","S","S+"];
      let warriors, freeAgents, otherTeams, money, salaryCap, lastDate, picks, trainLimit;

      function defaultData() {
        return {
          warriors:[
            {name:"Stephen Curry",rating:"S",salary:35,trainProgress:0,trained:false},
            {name:"Klay Thompson",rating:"B+",salary:20,trainProgress:0,trained:false},
            {name:"Draymond Green",rating:"B",salary:18,trainProgress:0,trained:false},
            {name:"Jonathan Kuminga",rating:"B",salary:15,trainProgress:0,trained:false},
            {name:"Andrew Wiggins",rating:"B+",salary:22,trainProgress:0,trained:false}
          ],
          freeAgents:[
            {name:"Malik Beasley",rating:"B",salary:15,signChance:60},
            {name:"Robert Covington",rating:"B-",salary:12,signChance:50}
          ],
          otherTeams:{
            "雷霆":[
              {name:"Shai Gilgeous‑Alexander",rating:"S",salary:34},
              {name:"Jalen Williams",rating:"A",salary:20}
            ],
            "湖人":[
              {name:"LeBron James",rating:"S",salary:37},
              {name:"Anthony Davis",rating:"S",salary:35}
            ]
          },
          money:100, salaryCap:140, lastDate:null,
          picks:{"勇士":2,"雷霆":2,"湖人":2},
          trainLimit:5
        };
      }

      function load(){
        const s = localStorage.getItem("sj_mobile_save");
        if(s) Object.assign(window, JSON.parse(s));
        else Object.assign(window, defaultData());
        lastDate = window.lastDate;
      }

      function save(){
        window.lastDate = lastDate;
        localStorage.setItem("sj_mobile_save", JSON.stringify({
          warriors, freeAgents, otherTeams, money, salaryCap, lastDate, picks, trainLimit
        }));
      }

      function renderStatus(){
        const now = new Date().toLocaleDateString();
        const sal = warriors.reduce((a, p) => a + p.salary, 0);
        document.getElementById("dateDisplay").textContent = "今天：" + now;
        document.getElementById("moneyDisplay").textContent =
          `資金:$${money}M 工資:${sal}/${salaryCap}M 首輪籤:${picks["勇士"]}`;
      }

      function showWarriors(){
        const out = document.getElementById("teamDisplay");
        let trainedCount = warriors.filter(p => p.trained).length;
        out.innerHTML = "<h2>🏀 勇士陣容</h2>";
        warriors.forEach((p, i) => {
          const pct = p.trainProgress;
          const next = order[order.indexOf(p.rating) + 1] || "MAX";
          out.innerHTML += `
            <div class="player">
              <div class="player-info">
                <strong>${p.name}</strong>｜${p.rating}｜$${p.salary}M｜訓練:${pct}% → ${next}
              </div>
              <button ${p.trained || trainedCount >= trainLimit ? "disabled" : ""} data-idx=${i}>訓練</button>
            </div>`;
        });
        out.querySelectorAll("button").forEach(btn => {
          btn.addEventListener("click", () => {
            const i = +btn.getAttribute("data-idx"), p = warriors[i];
            if(p.trained) return;
            p.trainProgress = Math.min(100, p.trainProgress + (10 + Math.random() * 10) | 0);
            p.trained = true;
            if(p.trainProgress >= 100){
              p.trainProgress = 0;
              if(Math.random() < 0.3){
                const idx = order.indexOf(p.rating);
                if(idx < order.length - 1){
                  p.rating = order[idx + 1];
                  alert(p.name + " 升級到 " + p.rating + "！");
                }
              }
            }
            save(); renderStatus(); showWarriors();
          });
        });
      }

      function showFreeAgents(){
        const out = document.getElementById("freeAgentsDisplay");
        out.innerHTML = "<h2>📝 自由市場</h2>";
        freeAgents.forEach((p, i) => {
          out.innerHTML += `
            <div class="player">
              <div class="player-info"><strong>${p.name}</strong>｜${p.rating}｜$${p.salary}M</div>
              <button data-idx=${i}>簽約</button>
            </div>`;
        });
        out.querySelectorAll("button").forEach(btn => {
          btn.addEventListener("click", () => {
            const i = +btn.getAttribute("data-idx"), p = freeAgents[i];
            if(money < p.salary){
              alert("資金不足！");
              return;
            }
            if(Math.random() * 100 < p.signChance){
              warriors.push({name: p.name, rating: p.rating, salary: p.salary, trainProgress: 0, trained: false});
              money -= p.salary;
              freeAgents.splice(i, 1);
              alert(p.name + " 成功簽約！");
            } else {
              alert(p.name + " 拒絕簽約");
            }
            save(); showWarriors(); showFreeAgents(); renderStatus();
          });
        });
      }

      function simulateGame(){
        const today = new Date().toDateString();
        if (lastDate === today) {
          alert("今日已模擬");
          return;
        }
        const oppTeams = Object.values(otherTeams);
        const opp = oppTeams[Math.floor(Math.random() * oppTeams.length)];
        const ts = warriors.reduce((a, p) => a + ratingMap[p.rating] * (Math.random() + 0.5), 0);
        const os = opp.reduce((a, p) => a + ratingMap[p.rating] * (Math.random() + 0.5), 0);
        const mvp = warriors[Math.floor(Math.random() * warriors.length)];
        document.getElementById("gameResult").innerHTML =
          `<h2>🏀 比分：${Math.floor(ts)} : ${Math.floor(os)}</h2><p>MVP：${mvp.name}</p>`;
        lastDate = today;
        save(); renderStatus();
      }

      function resetTraining(){
        warriors.forEach(p => p.trained = false);
        alert("訓練狀態重置");
        save(); showWarriors();
      }

      document.getElementById("showWarriorsBtn").addEventListener("click", showWarriors);
      document.getElementById("showFreeAgentsBtn").addEventListener("click", showFreeAgents);
      document.getElementById("simulateGameBtn").addEventListener("click", simulateGame);
      document.getElementById("resetTrainingBtn").addEventListener("click", resetTraining);
      document.getElementById("clearBtn").addEventListener("click", () => {
        if(confirm("清除資料？")) { localStorage.clear(); location.reload(); }
      });

      load(); renderStatus(); showWarriors();
    });
  </script>
</body>
</html>
</details>
